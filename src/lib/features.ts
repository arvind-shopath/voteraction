// Available Features in VoterAction App
export const APP_FEATURES = {
    VOTER_MANAGEMENT: {
        key: 'voter_management',
        name: '‡§Æ‡§§‡§¶‡§æ‡§§‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® (Voter Management)',
        description: '‡§Æ‡§§‡§¶‡§æ‡§§‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡•Ä ‡§¶‡•á‡§ñ‡§®‡§æ, ‡§ñ‡•ã‡§ú‡§®‡§æ, ‡§î‡§∞ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡§æ',
        icon: 'üë•',
        category: 'core'
    },
    BOOTH_MANAGEMENT: {
        key: 'booth_management',
        name: '‡§¨‡•Ç‡§• ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® (Booth Management)',
        description: '‡§¨‡•Ç‡§•-‡§µ‡§æ‡§∞ ‡§°‡•á‡§ü‡§æ, ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®',
        icon: 'üè¢',
        category: 'core'
    },
    WORKER_MANAGEMENT: {
        key: 'worker_management',
        name: '‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® (Worker Management)',
        description: '‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§®‡§æ, ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ ‡§î‡§∞ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡§æ',
        icon: 'üë∑',
        category: 'core'
    },
    PANNA_PRAMUKH: {
        key: 'panna_pramukh',
        name: '‡§™‡§®‡•ç‡§®‡§æ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ (Panna Pramukh)',
        description: '‡§™‡§®‡•ç‡§®‡§æ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§î‡§∞ ‡§Æ‡§§‡§¶‡§æ‡§§‡§æ ‡§Ö‡§∏‡§æ‡§á‡§®‡§Æ‡•á‡§Ç‡§ü',
        icon: 'üìä',
        category: 'advanced'
    },
    TASK_MANAGEMENT: {
        key: 'task_management',
        name: '‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® (Task Management)',
        description: '‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§∏‡•å‡§Ç‡§™‡§®‡§æ ‡§î‡§∞ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡§æ',
        icon: '‚úÖ',
        category: 'core'
    },
    ISSUE_TRACKING: {
        key: 'issue_tracking',
        name: '‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó (Issue Tracking)',
        description: '‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä',
        icon: '‚ö†Ô∏è',
        category: 'core'
    },
    SOCIAL_MEDIA: {
        key: 'social_media',
        name: '‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§ü‡•Ä‡§Æ (Social Media)',
        description: '‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§î‡§∞ ‡§ü‡•Ä‡§Æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®',
        icon: 'üì±',
        category: 'marketing'
    },
    JAN_SAMPARK: {
        key: 'jan_sampark',
        name: '‡§ú‡§®‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï (Jan Sampark)',
        description: '‡§ú‡§®‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∞‡•Ç‡§ü‡•ç‡§∏, ‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡•ç‡§∏ ‡§î‡§∞ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§ø‡§Ç‡§ó',
        icon: 'üö∂',
        category: 'fieldwork'
    },
    PUBLIC_RELATIONS: {
        key: 'public_relations',
        name: '‡§ú‡§®‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Å (Public Relations)',
        description: '‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§î‡§∞ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°',
        icon: 'ü§ù',
        category: 'fieldwork'
    },
    ELECTION_HISTORY: {
        key: 'election_history',
        name: '‡§ö‡•Å‡§®‡§æ‡§µ‡•Ä ‡§á‡§§‡§ø‡§π‡§æ‡§∏ (Election History)',
        description: '‡§™‡§ø‡§õ‡§≤‡•á ‡§ö‡•Å‡§®‡§æ‡§µ‡•ã‡§Ç ‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§î‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
        icon: 'üìà',
        category: 'analytics'
    },
    VOTER_IMPORT: {
        key: 'voter_import',
        name: '‡§Æ‡§§‡§¶‡§æ‡§§‡§æ ‡§Ü‡§Ø‡§æ‡§§ (CSV Import)',
        description: 'CSV/Excel ‡§´‡§æ‡§á‡§≤‡•ã‡§Ç ‡§∏‡•á ‡§Æ‡§§‡§¶‡§æ‡§§‡§æ ‡§°‡•á‡§ü‡§æ ‡§Ü‡§Ø‡§æ‡§§ ‡§ï‡§∞‡§®‡§æ',
        icon: 'üì•',
        category: 'tools'
    },
    CAMPAIGN_MANAGEMENT: {
        key: 'campaign_management',
        name: '‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§® ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® (Campaign Management)',
        description: '‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§® ‡§¨‡§®‡§æ‡§®‡§æ ‡§î‡§∞ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ',
        icon: 'üéØ',
        category: 'marketing'
    },
    ANALYTICS_DASHBOARD: {
        key: 'analytics_dashboard',
        name: '‡§è‡§®‡§æ‡§≤‡§ø‡§ü‡§ø‡§ï‡•ç‡§∏ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° (Analytics)',
        description: '‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡•ç‡§∏ ‡§î‡§∞ ‡§°‡•á‡§ü‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
        icon: 'üìä',
        category: 'analytics'
    }
};

// Default features for new candidates (all enabled by default)
export const DEFAULT_ENABLED_FEATURES = Object.keys(APP_FEATURES).map(
    key => (APP_FEATURES as any)[key].key
);

// Feature categories for grouping
export const FEATURE_CATEGORIES = {
    core: '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§è‡§Å (Core Features)',
    advanced: '‡§â‡§®‡•ç‡§®‡§§ ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§è‡§Å (Advanced)',
    marketing: '‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü‡§ø‡§Ç‡§ó (Marketing)',
    fieldwork: '‡§´‡•Ä‡§≤‡•ç‡§° ‡§µ‡§∞‡•ç‡§ï (Field Work)',
    analytics: '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ (Analytics)',
    tools: '‡§â‡§™‡§ï‡§∞‡§£ (Tools)'
};

// Helper function to check if a feature is enabled for an assembly
export function isFeatureEnabled(assembly: any, featureKey: string): boolean {
    if (!assembly.enabledFeatures) return true; // If not set, all features enabled
    try {
        const features = JSON.parse(assembly.enabledFeatures);
        return features.includes(featureKey);
    } catch {
        return true; // If parsing fails, assume all enabled
    }
}

// Helper to get enabled features list
export function getEnabledFeatures(assembly: any): string[] {
    if (!assembly.enabledFeatures) return DEFAULT_ENABLED_FEATURES;
    try {
        return JSON.parse(assembly.enabledFeatures);
    } catch {
        return DEFAULT_ENABLED_FEATURES;
    }
}
